{"ast":null,"code":"const initialState = {\n  conversations: [],\n  selectedConversation: {}\n};\ninitialState.selectedConversation = initialState.conversations[1];\n\nconst conversationsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'CONVERSATIONS_LOADED':\n      {\n        const newState = { ...state\n        };\n        newState.conversations = action.payload.conversations ? action.payload.conversations : [];\n        newState.selectedConversation = action.payload.selectedConversation;\n        return newState;\n      }\n\n    case 'SELECTED_CONVERSATION_CHANGED':\n      {\n        const newState = { ...state\n        };\n        newState.selectedConversation = newState.conversations.find(conversation => conversation.id === action.conversationId);\n        return newState;\n      }\n\n    case 'DELETE_CONVERSATION':\n      {\n        if (state.selectedConversation) {\n          const newState = { ...state\n          };\n          let selectedConversationIndex = newState.conversations.findIndex(c => c.id === newState.selectedConversation.id);\n          newState.conversations.splice(selectedConversationIndex, 1);\n\n          if (newState.conversations.length > 0) {\n            if (selectedConversationIndex > 0) {\n              --selectedConversationIndex;\n            }\n\n            newState.selectedConversation = newState.conversations[selectedConversationIndex];\n          } else {\n            newState.selectedConversation = null;\n          }\n\n          return newState;\n        }\n\n        return state;\n      }\n\n    case 'NEW_MESSAGE_ADDED':\n      {\n        if (state.selectedConversation) {\n          const newState = { ...state\n          };\n          newState.selectedConversation = { ...newState.selectedConversation\n          };\n          newState.selectedConversation.messages.unshift({\n            imageUrl: null,\n            imageAlt: null,\n            messageText: action.textMessage,\n            createdAt: 'Apr 16',\n            isMyMessage: true\n          });\n          return newState;\n        }\n\n        return state;\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport default conversationsReducer;","map":{"version":3,"names":["initialState","conversations","selectedConversation","conversationsReducer","state","action","type","newState","payload","find","conversation","id","conversationId","selectedConversationIndex","findIndex","c","splice","length","messages","unshift","imageUrl","imageAlt","messageText","textMessage","createdAt","isMyMessage"],"sources":["C:/Users/LENOVO/Projects/chat-app-react/src/store/reducers/conversations.js"],"sourcesContent":["const initialState = {\r\n    conversations: [],\r\n    selectedConversation: {}\r\n};\r\n\r\ninitialState.selectedConversation = initialState.conversations[1];\r\n\r\nconst conversationsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'CONVERSATIONS_LOADED': {\r\n            const newState = { ...state };\r\n            newState.conversations = action.payload.conversations ? action.payload.conversations : [];\r\n            newState.selectedConversation = action.payload.selectedConversation;\r\n\r\n            return newState;\r\n        }\r\n      case 'SELECTED_CONVERSATION_CHANGED': {\r\n        const newState = { ...state };\r\n        newState.selectedConversation = \r\n            newState.conversations.find(\r\n                conversation => conversation.id === action.conversationId\r\n            );\r\n\r\n        return newState;\r\n      }\r\n      case 'DELETE_CONVERSATION': {\r\n        if (state.selectedConversation) {\r\n            const newState = { ...state };\r\n\r\n            let selectedConversationIndex = \r\n                newState.conversations.findIndex(c => c.id === newState.selectedConversation.id);\r\n            newState.conversations.splice(selectedConversationIndex, 1);\r\n\r\n            if (newState.conversations.length > 0) {\r\n                if (selectedConversationIndex > 0) {\r\n                    --selectedConversationIndex;\r\n                }\r\n        \r\n                newState.selectedConversation = newState.conversations[selectedConversationIndex];\r\n            } else {\r\n                newState.selectedConversation = null;\r\n            }\r\n\r\n            return newState;\r\n        }\r\n        \r\n        return state;\r\n      }\r\n      case 'NEW_MESSAGE_ADDED': {\r\n          if (state.selectedConversation) {\r\n            const newState = { ...state };\r\n            newState.selectedConversation = { ...newState.selectedConversation };\r\n            \r\n            newState.selectedConversation.messages.unshift(\r\n                {\r\n                    imageUrl: null,\r\n                    imageAlt: null,\r\n                    messageText: action.textMessage,\r\n                    createdAt: 'Apr 16',\r\n                    isMyMessage: true\r\n                },\r\n            )\r\n    \r\n            return newState;\r\n          }\r\n\r\n          return state;\r\n      }\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n  \r\nexport default conversationsReducer;"],"mappings":"AAAA,MAAMA,YAAY,GAAG;EACjBC,aAAa,EAAE,EADE;EAEjBC,oBAAoB,EAAE;AAFL,CAArB;AAKAF,YAAY,CAACE,oBAAb,GAAoCF,YAAY,CAACC,aAAb,CAA2B,CAA3B,CAApC;;AAEA,MAAME,oBAAoB,GAAG,YAAkC;EAAA,IAAjCC,KAAiC,uEAAzBJ,YAAyB;EAAA,IAAXK,MAAW;;EAC3D,QAAQA,MAAM,CAACC,IAAf;IACI,KAAK,sBAAL;MAA6B;QACzB,MAAMC,QAAQ,GAAG,EAAE,GAAGH;QAAL,CAAjB;QACAG,QAAQ,CAACN,aAAT,GAAyBI,MAAM,CAACG,OAAP,CAAeP,aAAf,GAA+BI,MAAM,CAACG,OAAP,CAAeP,aAA9C,GAA8D,EAAvF;QACAM,QAAQ,CAACL,oBAAT,GAAgCG,MAAM,CAACG,OAAP,CAAeN,oBAA/C;QAEA,OAAOK,QAAP;MACH;;IACH,KAAK,+BAAL;MAAsC;QACpC,MAAMA,QAAQ,GAAG,EAAE,GAAGH;QAAL,CAAjB;QACAG,QAAQ,CAACL,oBAAT,GACIK,QAAQ,CAACN,aAAT,CAAuBQ,IAAvB,CACIC,YAAY,IAAIA,YAAY,CAACC,EAAb,KAAoBN,MAAM,CAACO,cAD/C,CADJ;QAKA,OAAOL,QAAP;MACD;;IACD,KAAK,qBAAL;MAA4B;QAC1B,IAAIH,KAAK,CAACF,oBAAV,EAAgC;UAC5B,MAAMK,QAAQ,GAAG,EAAE,GAAGH;UAAL,CAAjB;UAEA,IAAIS,yBAAyB,GACzBN,QAAQ,CAACN,aAAT,CAAuBa,SAAvB,CAAiCC,CAAC,IAAIA,CAAC,CAACJ,EAAF,KAASJ,QAAQ,CAACL,oBAAT,CAA8BS,EAA7E,CADJ;UAEAJ,QAAQ,CAACN,aAAT,CAAuBe,MAAvB,CAA8BH,yBAA9B,EAAyD,CAAzD;;UAEA,IAAIN,QAAQ,CAACN,aAAT,CAAuBgB,MAAvB,GAAgC,CAApC,EAAuC;YACnC,IAAIJ,yBAAyB,GAAG,CAAhC,EAAmC;cAC/B,EAAEA,yBAAF;YACH;;YAEDN,QAAQ,CAACL,oBAAT,GAAgCK,QAAQ,CAACN,aAAT,CAAuBY,yBAAvB,CAAhC;UACH,CAND,MAMO;YACHN,QAAQ,CAACL,oBAAT,GAAgC,IAAhC;UACH;;UAED,OAAOK,QAAP;QACH;;QAED,OAAOH,KAAP;MACD;;IACD,KAAK,mBAAL;MAA0B;QACtB,IAAIA,KAAK,CAACF,oBAAV,EAAgC;UAC9B,MAAMK,QAAQ,GAAG,EAAE,GAAGH;UAAL,CAAjB;UACAG,QAAQ,CAACL,oBAAT,GAAgC,EAAE,GAAGK,QAAQ,CAACL;UAAd,CAAhC;UAEAK,QAAQ,CAACL,oBAAT,CAA8BgB,QAA9B,CAAuCC,OAAvC,CACI;YACIC,QAAQ,EAAE,IADd;YAEIC,QAAQ,EAAE,IAFd;YAGIC,WAAW,EAAEjB,MAAM,CAACkB,WAHxB;YAIIC,SAAS,EAAE,QAJf;YAKIC,WAAW,EAAE;UALjB,CADJ;UAUA,OAAOlB,QAAP;QACD;;QAED,OAAOH,KAAP;MACH;;IACD;MACE,OAAOA,KAAP;EA7DJ;AA+DD,CAhEH;;AAkEA,eAAeD,oBAAf"},"metadata":{},"sourceType":"module"}